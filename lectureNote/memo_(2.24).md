# 엘리스 실시간 수업*(JDY 코치님)* 백엔드

## 2.24.(목)

## 1교시

### 리뷰

- 쿠키는 사용자의 브러우저에 심음
- 세션은 서버에 심음( 내서버에 저장하는 사용자의 작은 정보 )

- 세션의 단점은 서비스가 커져버리면 동시 접속자 수가 들어나서 세션의 수도 더 늘어나게됨 그러면 서버의 메모리 공간을 많이 차지하게 되서 메모리와 데이터에 대해서 고민을 해야됨

세션 옵션
resave: 세션을 그떄 그때 다시 저장 할 거냐?
saveUninitialize: 사용자가 서버에 처음 들어왔을때 요청 객체가 아무것도 없지만 사용자 객체를 저장할거냐?

ㅁAPI
카카오 디벨로퍼 <<
네이버 디벨로퍼 <<
금융감독원에서 운영 하는 dart.fss.or.kr << 상장기업들은 모든 공시가 올라오게됨( 여기를 베이스로 뉴스를 만듬 )

API를 열심히 개발해서 푸는 이유는??
: 오픈소스 ( 개발자들이 내가 만든 코드를 공유하고 싶음 )
: 오픈소스 문화가 좋은 코드와 좋은 코드는 공유하자 라는 마인드가 있음
: 그래서 API를 도의적으로 공개함
: 정부 공공기관들은 국민을 위해서 운영되기에 공개 의무가 있음

## 2교시

type
VS
token : ID 같은 사용자와 식별할 수 있는 언어

- jwt 토큰 (jwt.io)
- 빨간 부분 : header(암호화 알고리즘, 타입)
- 보라색 부분 : payload(body, data : 실제 내용)
- 하늘색 부분 : verify signature (인코딩 정보, (!서버만에 비밀키:your-256-bit...)<- 비밀키를 잃어버리면 우리 서비의 모든것을 해독하게됨.. 조심! )

+)TMI : 백신 QR 에 jwt 토큰이 들어가 있음!

## 3교시, 4교시

회원가입 가정하고 토큰이 주어진것을 시뮬레이션한것

토큰을 로그인과 인증 이외에 다른 목적으로 사용이 가능함
여태까지는 서버가 사용자를 인식하기 위해서는 데이터베이스에 기록해놓았다가 조회를 했어야했는데(데이터베이스 관리 비용이 듬), JWT 토큰안에다가 비밀키와 데이터를 넣은다음에 암호화를 하면 기본적으로 내 웹서버 데이터베이스에 저장할 필요가 없어진거임.
전국민의 QR을 백신으로 찍는다고 했을때 전국민의 5천만의 데이터를 데이터베이스에 넣지않고 사용자들이 JWT 토큰으로 들고다니면서 돌아 댕길 수 있게 하는거임. 서로 편하고 DB 관리 불필요.

서버에서는 비밀키만 관리하고 비밀키랑 대조해서 해석한다음 해석이 되면 통가됨
비밀키가 없다면 유효정보인지 확인 할 수 없지만, 비밀키만 가지고 있으면 그 정보를 모든지 다 볼 수 있는 위험성이 있음( 관리를 잘 해야함 )

JWT 토큰: 편리하지만 보안에 상당히 취약한 단점이 있음
보안성이 높지 않는 서비스를 운영할때는 JWT 토큰을 사용해도됨

템플릿 엔진은 우리가 준비한 값을 입혀서 뿌려주게됨!
몽구스에다가 {users} 값을 언져서 주게됨

mongoose.html 파일 중간에 보면 "{% %}" 템플릿 엔진 문법이 있음

<다이어리 어플 추가 수정 가이드>
현재 다이어리 어플이 나이를 입력 받고 있는데 나이를 위로 올려서 제목으로 바꾸고 숫자에서 스트링으로
결혼여부는 지우자 or 그날의 날씨나 기분으로 바꾸거나
밑에 테이블은 이름을 내용으로 변경 나이는 제목으로 변경

배경을 50%로 투명도 해주기
다이어리 입력창이 하얀데 속지를 넣고 원하는 크기로 좀 키우기

## 5교시 \_ 실습

지금까지 공부한것 : 웹 서버 ㅣ nodejs + express

서버> : 특정한 목적으로 설치해둔 컴퓨터

1. 하드웨어 (컴퓨터(PC))
2. S/W (node.js(웹서버))(mongoDB)

머신러닝 엔지니어가 백엔드도 조금 알고 있어야함
web 서버도 파일을 공유하는데 사용할 수 잇음(모델을 넘기거나 API 서버(ex.카톡대화내용(데이터) => 감정분석 )로 와 연결해서 서비스제공)
웹 서버와 연결하는 API ML 서비스 가능

웹서버: 브라우저로 접근할 수 잇는 웹을 제공
API 서버: API 서버도 웹서버의 한 형태임, HTTP를 통해서 자료를 접근 가능!

RESTful API: 자원을 반환하는 웹서버

게시판은 웹 개발의 걸음마!
DB, 인증 등 많은것을 핸들링 해야되서

RESTful API :
자원에 중점을 둔 서비스
자원? : 회원, 게시글, 댓글, 영상, 메세지, 강의실 ... 등

middleware : 국밥집 -> 주문(요청) - 조리 - 음식서빙(응답)
국밥집(선결제) 우리는 국밥이 주문이 주문하고 (레시피, 재료) 그런거 앞에 있는것을 알필요 없이 국밥만 받아가면 됨
미들웨어는 이 중간에서 핸들링 해줌( 내부 서비스 )

## 6교시

라우터 : 길을 찾아주는거
라우팅 : 길을 찾는 행위

res.write => string 변환 / res.send
res.render => html 탬플릿에 빈칸을 채워 반환 /
res.json => object({a:1, b:2})를 반환

req.user / req.set
passport
req.name = "my first request"

JWT : 제이슨 웹 토큰
존맛탱 아님!!
토큰으로 인증을 하기위해서 주는것 ( 주민등록증 나눠주는거랑 비슷)
토큰을 발급해주고 너 자신을 증명해
